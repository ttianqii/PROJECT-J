@import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Fira+Code:wght@300;400;500&display=swap');
@import "tailwindcss";

/* ── Design tokens ─────────────────────────────────────────────────────────── */
:root {
  --bg:         #07080f;
  --surface:    #0e1019;
  --surface-2:  #161923;
  --border:     rgba(255,255,255,0.07);
  --border-hi:  rgba(255,255,255,0.14);
  --text:       #eceae4;
  --text-muted: rgba(236,234,228,0.42);
  --radius:     14px;
  --font-ui:    'Syne', 'Noto Sans Thai', 'Noto Sans JP', sans-serif;
  --font-mono:  'Fira Code', monospace;
}

@layer base {
  * { box-sizing: border-box; }

  body {
    margin: 0;
    font-family: var(--font-ui);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--bg);
    color: var(--text);
  }

  /* Film grain overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 300px;
    opacity: 0.35;
  }

  #root { position: relative; z-index: 1; }
}

/* ── Recording pulse ─────────────────────────────────────────────────────── */
@keyframes record-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50%       { transform: scale(1.15); opacity: 0.75; }
}
.recording-pulse { animation: record-pulse 1s ease-in-out infinite; }

/* ── Equalizer bars ──────────────────────────────────────────────────────── */
@keyframes audiobar {
  0%, 100% { transform: scaleY(0.15); }
  50%       { transform: scaleY(1); }
}

/* ── Waveform bar (PHONOS .bar class) ───────────────────────────────────── */
@keyframes wave {
  0%, 100% { transform: scaleY(0.35); }
  50%       { transform: scaleY(1.5); }
}
.bar {
  width: 3px;
  border-radius: 2px;
  transform-origin: bottom;
  animation: wave 1.1s ease-in-out infinite;
  animation-delay: calc(var(--i, 0) * 0.09s);
}

/* ── Voice pulse ripple ──────────────────────────────────────────────────── */
@keyframes voice-ripple {
  0%   { transform: scale(1);   opacity: 0.22; }
  100% { transform: scale(2.4); opacity: 0; }
}

/* ── Ring breathe ────────────────────────────────────────────────────────── */
@keyframes ring-breathe {
  0%, 100% { transform: scale(1);    opacity: 0.6; }
  50%       { transform: scale(1.07); opacity: 1; }
}

/* ── Orb float / breathe ─────────────────────────────────────────────────── */
@keyframes orb-float {
  0%, 100% { transform: translateY(0px); }
  50%      { transform: translateY(-8px); }
}
@keyframes orb-breathe {
  0%, 100% { transform: scale(1);    box-shadow: var(--orb-glow-lo); }
  50%      { transform: scale(1.07); box-shadow: var(--orb-glow-hi); }
}

/* ── Siri-style blob morphing ─────────────────────────────────────────────── */
@keyframes siri-blob-1 {
  0%,100% { border-radius: 60% 40% 55% 45% / 55% 45% 60% 40%;
            transform: translate(-10%,-8%) scale(1.12); }
  33%     { border-radius: 44% 56% 66% 34% / 44% 62% 38% 56%;
            transform: translate(7%,-15%) scale(1.2); }
  66%     { border-radius: 56% 44% 38% 62% / 64% 34% 66% 44%;
            transform: translate(-5%,10%) scale(1.06); }
}
@keyframes siri-blob-2 {
  0%,100% { border-radius: 42% 58% 48% 52% / 60% 40% 56% 44%;
            transform: translate(14%,8%) scale(1.08); }
  33%     { border-radius: 66% 34% 56% 44% / 50% 60% 44% 56%;
            transform: translate(-12%,13%) scale(1.16); }
  66%     { border-radius: 46% 54% 34% 66% / 44% 56% 64% 36%;
            transform: translate(12%,-12%) scale(1.22); }
}
@keyframes siri-blob-3 {
  0%,100% { border-radius: 54% 46% 64% 36% / 46% 62% 40% 54%;
            transform: translate(6%,14%) scale(0.86); }
  33%     { border-radius: 36% 64% 44% 56% / 55% 36% 64% 44%;
            transform: translate(-14%,-6%) scale(0.97); }
  66%     { border-radius: 64% 36% 56% 44% / 36% 68% 32% 64%;
            transform: translate(5%,-15%) scale(0.92); }
}

/* ── Siri voice pulse ring ────────────────────────────────────────────────── */
@keyframes siri-pulse {
  0%   { transform: scale(1);   opacity: 0.5; }
  80%  { opacity: 0; }
  100% { transform: scale(1.9); opacity: 0; }
}

/* ── Word appear (streaming text) ───────────────────────────────────────── */
@keyframes word-appear {
  from { opacity: 0; transform: translateY(5px); filter: blur(4px); }
  to   { opacity: 1; transform: translateY(0);   filter: blur(0); }
}
.word-appear {
  display: inline-block;
  opacity: 0;
  animation: word-appear 0.3s ease-out forwards;
}

/* ── Fade up ────────────────────────────────────────────────────────────── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Thinking dots ──────────────────────────────────────────────────────── */
@keyframes thinking-dot {
  0%, 60%, 100% { opacity: 0.25; transform: translateY(0); }
  30%            { opacity: 1;   transform: translateY(-4px); }
}
.thinking {
  display: inline-flex;
  gap: 5px;
  align-items: center;
}
.thinking span {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--text-muted);
  animation: thinking-dot 1.3s ease-in-out infinite;
}
.thinking span:nth-child(2) { animation-delay: 0.18s; }
.thinking span:nth-child(3) { animation-delay: 0.36s; }

/* ── Gauge fill ─────────────────────────────────────────────────────────── */
@keyframes gauge-fill { from { stroke-dashoffset: 251; } }

/* ── Scrollbar hide ─────────────────────────────────────────────────────── */
.scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }
.scrollbar-none::-webkit-scrollbar { display: none; }

/* ── Slide transitions ──────────────────────────────────────────────────── */
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(32px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-32px); }
  to   { opacity: 1; transform: translateX(0); }
}

/* ── Orbiting-dot loader (used in FreeSpeak loading state) ──────────────────── */
@keyframes orb-dot-orbit {
  from { transform: rotate(0deg)   translateX(var(--orbit-r, 22px)) rotate(0deg); }
  to   { transform: rotate(360deg) translateX(var(--orbit-r, 22px)) rotate(-360deg); }
}
@keyframes orb-dot-pulse {
  0%, 100% { opacity: 0.45; transform: translate(-50%,-50%) scale(0.75); }
  50%       { opacity: 1;    transform: translate(-50%,-50%) scale(1.25); }
}
@keyframes orb-ring-spin {
  to { transform: translate(-50%,-50%) rotate(360deg); }
}

/* ── Section card ───────────────────────────────────────────────────────── */
.section-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 1rem;
  animation: fadeUp 0.4s ease both;
  transition: border-color 0.2s;
}

/* ── UI label ───────────────────────────────────────────────────────────── */
.ui-label {
  font-family: var(--font-ui);
  font-size: 0.63rem;
  font-weight: 600;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--text-muted);
}

/* ── Section label ──────────────────────────────────────────────────────── */
.section-label {
  font-family: var(--font-ui);
  font-size: 0.62rem;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #6ee7b7; /* green accent; overridden via className when needed */
}

/* ── Error box ──────────────────────────────────────────────────────────── */
.error-box {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  background: rgba(255,107,107,0.06);
  border: 1px solid rgba(255,107,107,0.18);
  border-radius: 10px;
  padding: 0.75rem 1rem;
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: #ff9090;
  animation: fadeUp 0.3s ease both;
}
